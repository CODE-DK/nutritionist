# üîê Environment Setup

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

```
‚úÖ .env              # –†–∞–±–æ—á–∏–π —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ–π—á–∞—Å)
‚úÖ .env.production   # –ë—ç–∫–∞–ø —Ä–∞–±–æ—á–∏—Ö –∫–ª—é—á–µ–π
‚úÖ .env.example      # –®–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
```

**–ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:**

- **Supabase:** `sltpiyphjwlawrabkcnh.supabase.co` ‚úÖ
- **Edge Functions:** chat-gpt, analyze-food-photo ‚úÖ
- **–°–µ–∫—Ä–µ—Ç—ã:** OPENAI_API_KEY, ANTHROPIC_API_KEY ‚úÖ

**–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
node supabase/test-connection.js

# –°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π
supabase functions list

# –°–ø–∏—Å–æ–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤
supabase secrets list
```

---

## üìã –î–≤–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –§–∞–π–ª              | –û–∫—Ä—É–∂–µ–Ω–∏–µ         | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å         |
| ----------------- | ----------------- | -------------------------- |
| `.env.local`      | Local development | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ |
| `.env.production` | Production        | –ë–æ–µ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–∞—Ö |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–µ–Ω `.env` –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è **–ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

- **Supabase:** `sltpiyphjwlawrabkcnh.supabase.co`
- **Edge Functions:** chat-gpt, analyze-food-photo
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã ‚úÖ

### –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å production –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ —Ä–µ–ª–∏–∑—É:

1. **–°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Supabase –ø—Ä–æ–µ–∫—Ç** –¥–ª—è production
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω:**
   ```bash
   cp .env.template .env.production
   ```
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ production –∑–Ω–∞—á–µ–Ω–∏—è** (–Ω–æ–≤—ã–µ –∫–ª—é—á–∏, –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)
4. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –∫ production –ë–î

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π

### –°–ø–æ—Å–æ–± 1: Symlink (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
ln -sf .env.local .env

# –î–ª—è production (–ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º)
ln -sf .env.production .env
```

### –°–ø–æ—Å–æ–± 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
cp .env.local .env

# –î–ª—è production
cp .env.production .env
```

### –°–ø–æ—Å–æ–± 3: –°–∫—Ä–∏–ø—Ç

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
chmod +x scripts/switch-env.sh

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
./scripts/switch-env.sh local       # –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./scripts/switch-env.sh production  # –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```typescript
// Expo –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
import { EXPO_PUBLIC_SUPABASE_URL } from '@env';

// –ò–ª–∏ —á–µ—Ä–µ–∑ process.env
const supabaseUrl = process.env.EXPO_PUBLIC_SUPABASE_URL;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
const isProduction = process.env.APP_ENV === 'production';
```

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Metro:

```bash
pnpm start -- --clear
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –î–µ–ª–∞–π—Ç–µ:

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ä–∞–∑–Ω—ã–µ API –∫–ª—é—á–∏** –¥–ª—è local –∏ production
- –•—Ä–∞–Ω–∏—Ç–µ production —Å–µ–∫—Ä–µ—Ç—ã –≤ **1Password/Vault**
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ `.gitignore` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- **–†–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏** —Ä–µ–≥—É–ª—è—Ä–Ω–æ

### ‚ùå –ù–µ –¥–µ–ª–∞–π—Ç–µ:

- –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª—ã (–∫—Ä–æ–º–µ `.template`)
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ production –∫–ª—é—á–∏ –ª–æ–∫–∞–ª—å–Ω–æ
- –ù–ï —à–∞—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö
- –ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å –∫–ª—é—á–∞–º–∏

## üìä –§–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

```
‚úÖ .env.template       # –®–∞–±–ª–æ–Ω (–≤ git)
‚úÖ .env.example        # –ü—Ä–∏–º–µ—Ä (–≤ git)
‚ùå .env                # –ê–∫—Ç–∏–≤–Ω—ã–π (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚ùå .env.local          # –õ–æ–∫–∞–ª—å–Ω—ã–π (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚ùå .env.production     # –ü—Ä–æ–¥–∞–∫—à–µ–Ω (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)
```

## üÜò Troubleshooting

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª
cat .env

# 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à
pnpm start -- --clear

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pnpm expo start -c
```

### –ö–∞–∫–æ–π .env —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–µ–Ω?

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ APP_ENV
cat .env | grep APP_ENV
```

### –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
node supabase/test-connection.js
```

## üìù Checklist –ø–µ—Ä–µ–¥ production

- [ ] –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Supabase –ø—Ä–æ–µ–∫—Ç –¥–ª—è production
- [ ] –ü–æ–ª—É—á–µ–Ω—ã production API –∫–ª—é—á–∏ (OpenAI, Claude)
- [ ] –°–æ–∑–¥–∞–Ω `.env.production` —Å production –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ production –ë–î
- [ ] –ó–∞–¥–µ–ø–ª–æ–µ–Ω—ã Edge Functions –≤ production
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã –≤ production Supabase
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ (Sentry)
